/* CSS pour TradingLab - Dashboard de Trading */

/* Variables CSS pour les couleurs */
:root {
    --bg-primary: #1e2130;
    --bg-secondary: #252e3f;
    --bg-card: #2a3548;
    --text-primary: #ecf0f1;
    --text-secondary: #bdc3c7;
    --accent-blue: #3498db;
    --success-green: #2ecc71;
    --danger-red: #e74c3c;
    --warning-orange: #f39c12;
    --border-color: #34495e;
}

/* Theme général sombre */
body {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Correction des dropdowns Dash - Version améliorée */
.Select-control,
div[data-dash-is-loading="true"] .Select-control,
.dash-dropdown .Select-control {
    background-color: var(--bg-card) !important;
    background: linear-gradient(145deg, var(--bg-card), var(--bg-secondary)) !important;
    border: 1px solid var(--border-color) !important;
    color: var(--text-primary) !important;
    border-radius: 6px !important;
    min-height: 38px !important;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
}

.Select-control:hover,
.dash-dropdown .Select-control:hover {
    border-color: var(--accent-blue) !important;
    box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2), inset 0 1px 3px rgba(0,0,0,0.1) !important;
}

.Select-input,
.Select-input input {
    color: var(--text-primary) !important;
    background: transparent !important;
}

.Select-placeholder,
.dash-dropdown .Select-placeholder {
    color: var(--text-secondary) !important;
    font-style: italic !important;
}

.Select-single-value,
.dash-dropdown .Select-single-value {
    color: var(--text-primary) !important;
    font-weight: 500 !important;
}

.Select-value-label,
.dash-dropdown .Select-value-label {
    color: var(--text-primary) !important;
}

.Select-arrow-zone,
.Select-arrow,
.dash-dropdown .Select-arrow-zone,
.dash-dropdown .Select-arrow {
    color: var(--text-secondary) !important;
    border-color: var(--text-secondary) transparent transparent !important;
}

.Select-menu-outer,
.dash-dropdown .Select-menu-outer {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 6px !important;
    z-index: 9999 !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;
    margin-top: 2px !important;
}

.Select-menu,
.dash-dropdown .Select-menu {
    background-color: var(--bg-card) !important;
    border-radius: 5px !important;
    overflow: hidden !important;
}

.Select-option,
.dash-dropdown .Select-option {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
    padding: 10px 12px !important;
    cursor: pointer !important;
    border-bottom: 1px solid rgba(255,255,255,0.05) !important;
    font-weight: 400 !important;
}

.Select-option:last-child,
.dash-dropdown .Select-option:last-child {
    border-bottom: none !important;
}

.Select-option:hover,
.Select-option.is-focused,
.dash-dropdown .Select-option:hover,
.dash-dropdown .Select-option.is-focused {
    background-color: var(--accent-blue) !important;
    background: linear-gradient(145deg, var(--accent-blue), #2980b9) !important;
    color: white !important;
    font-weight: 500 !important;
}

.Select-option.is-selected,
.dash-dropdown .Select-option.is-selected {
    background-color: var(--success-green) !important;
    background: linear-gradient(145deg, var(--success-green), #27ae60) !important;
    color: white !important;
    font-weight: 600 !important;
}

.Select-option.is-selected:hover,
.dash-dropdown .Select-option.is-selected:hover {
    background: linear-gradient(145deg, #27ae60, #229954) !important;
}

/* Fix pour les dropdowns avec recherche */
.Select-input > input {
    color: var(--text-primary) !important;
    background: transparent !important;
    border: none !important;
    outline: none !important;
}

/* Style pour les dropdowns désactivés */
.Select-control.is-disabled,
.dash-dropdown .Select-control.is-disabled {
    background-color: var(--bg-primary) !important;
    color: var(--text-secondary) !important;
    opacity: 0.6 !important;
    cursor: not-allowed !important;
}

/* Loading state */
.Select--loading .Select-arrow-zone::after {
    content: "";
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid var(--text-secondary);
    border-radius: 50%;
    border-top-color: var(--accent-blue);
    animation: spin 1s ease-in-out infinite;
}

/* Dropdown moderne avec CSS moderne */
.dash-dropdown .Select-control {
    background: linear-gradient(145deg, var(--bg-card), var(--bg-secondary)) !important;
    border-radius: 6px !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
    min-height: 38px !important;
}

.dash-dropdown .Select-control:hover {
    border-color: var(--accent-blue) !important;
    box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2) !important;
}

.dash-dropdown .Select-arrow-zone {
    color: var(--text-secondary) !important;
}

/* Inputs stylés */
.form-control {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border-color) !important;
    color: var(--text-primary) !important;
    border-radius: 6px !important;
}

.form-control:focus {
    background-color: var(--bg-card) !important;
    border-color: var(--accent-blue) !important;
    box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2) !important;
    color: var(--text-primary) !important;
}

.form-control::placeholder {
    color: var(--text-secondary) !important;
}

/* Boutons stylés - Version corrigée pour le texte visible */
.btn, 
button.btn,
.dash-button,
input[type="button"],
input[type="submit"] {
    border-radius: 6px !important;
    font-weight: 600 !important;
    transition: all 0.2s ease !important;
    color: white !important;
    text-decoration: none !important;
    border: none !important;
    padding: 8px 16px !important;
    cursor: pointer !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    min-height: 38px !important;
}

.btn-primary,
button.btn-primary {
    background: linear-gradient(145deg, var(--accent-blue), #2980b9) !important;
    color: white !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
}

.btn-primary:hover,
.btn-primary:focus,
.btn-primary:active,
button.btn-primary:hover,
button.btn-primary:focus,
button.btn-primary:active {
    background: linear-gradient(145deg, #2980b9, #21618c) !important;
    color: white !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3) !important;
    text-decoration: none !important;
}

.btn-success,
button.btn-success {
    background: linear-gradient(145deg, var(--success-green), #27ae60) !important;
    color: white !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
}

.btn-success:hover,
.btn-success:focus,
.btn-success:active,
button.btn-success:hover,
button.btn-success:focus,
button.btn-success:active {
    background: linear-gradient(145deg, #27ae60, #229954) !important;
    color: white !important;
    transform: translateY(-1px) !important;
    text-decoration: none !important;
}

.btn-danger,
button.btn-danger {
    background: linear-gradient(145deg, var(--danger-red), #c0392b) !important;
    color: white !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
}

.btn-danger:hover,
.btn-danger:focus,
.btn-danger:active,
button.btn-danger:hover,
button.btn-danger:focus,
button.btn-danger:active {
    background: linear-gradient(145deg, #c0392b, #a93226) !important;
    color: white !important;
    transform: translateY(-1px) !important;
    text-decoration: none !important;
}

.btn-secondary,
button.btn-secondary {
    background: linear-gradient(145deg, #6c757d, #5a6268) !important;
    color: white !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
}

.btn-secondary:hover,
.btn-secondary:focus,
.btn-secondary:active,
button.btn-secondary:hover,
button.btn-secondary:focus,
button.btn-secondary:active {
    background: linear-gradient(145deg, #5a6268, #494f54) !important;
    color: white !important;
    transform: translateY(-1px) !important;
    text-decoration: none !important;
}

.btn-info,
button.btn-info {
    background: linear-gradient(145deg, #17a2b8, #138496) !important;
    color: white !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
}

.btn-info:hover,
.btn-info:focus,
.btn-info:active,
button.btn-info:hover,
button.btn-info:focus,
button.btn-info:active {
    background: linear-gradient(145deg, #138496, #0f6674) !important;
    color: white !important;
    transform: translateY(-1px) !important;
    text-decoration: none !important;
}

/* Assurer que les icônes et le texte sont visibles */
.btn i,
.btn .fas,
.btn .fa,
button i,
button .fas,
button .fa {
    color: white !important;
    margin-right: 6px !important;
}

/* Pour les boutons de petite taille */
.btn-sm,
button.btn-sm {
    padding: 4px 8px !important;
    font-size: 12px !important;
    min-height: 28px !important;
}

/* Pour les boutons avec du texte uniquement */
.btn span,
button span {
    color: white !important;
}

/* Fix spécifique pour les boutons Bootstrap-Dash */
.btn:not(:disabled):not(.disabled),
button:not(:disabled):not(.disabled) {
    color: white !important;
}

.btn:visited,
button:visited {
    color: white !important;
}

/* Cards et containers */
.card {
    background-color: var(--bg-secondary) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1) !important;
    margin-bottom: 20px !important;
}

.card-header {
    background: linear-gradient(145deg, #2c3e50, #34495e) !important;
    color: var(--text-primary) !important;
    border-bottom: 1px solid var(--border-color) !important;
    font-weight: bold !important;
}

.card-body {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
}

/* Tables */
.dash-table-container {
    background-color: var(--bg-secondary) !important;
}

.dash-table-container table {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
}

/* Onglets */
.nav-tabs {
    border-bottom: 2px solid var(--border-color) !important;
}

.nav-tabs .nav-link {
    background-color: var(--bg-card) !important;
    color: var(--text-secondary) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 6px 6px 0 0 !important;
    margin-right: 2px !important;
}

.nav-tabs .nav-link:hover {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border-color: var(--accent-blue) !important;
}

.nav-tabs .nav-link.active {
    background-color: var(--accent-blue) !important;
    color: white !important;
    border-color: var(--accent-blue) !important;
}

/* Alertes */
.alert {
    border-radius: 6px !important;
    border: none !important;
}

.alert-success {
    background: linear-gradient(145deg, rgba(46, 204, 113, 0.2), rgba(39, 174, 96, 0.1)) !important;
    color: var(--success-green) !important;
    border-left: 4px solid var(--success-green) !important;
}

.alert-danger {
    background: linear-gradient(145deg, rgba(231, 76, 60, 0.2), rgba(192, 57, 43, 0.1)) !important;
    color: var(--danger-red) !important;
    border-left: 4px solid var(--danger-red) !important;
}

.alert-info {
    background: linear-gradient(145deg, rgba(52, 152, 219, 0.2), rgba(41, 128, 185, 0.1)) !important;
    color: var(--accent-blue) !important;
    border-left: 4px solid var(--accent-blue) !important;
}

.alert-warning {
    background: linear-gradient(145deg, rgba(243, 156, 18, 0.2), rgba(211, 84, 0, 0.1)) !important;
    color: var(--warning-orange) !important;
    border-left: 4px solid var(--warning-orange) !important;
}

/* DatePicker */
.DateInput {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
}

.DateInput_input {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
}

.DateRangePickerInput {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 6px !important;
}

/* Labels et texte */
label {
    color: var(--text-primary) !important;
    font-weight: 600 !important;
    margin-bottom: 8px !important;
}

.text-muted {
    color: var(--text-secondary) !important;
}

/* Scrollbars stylées */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-primary);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--accent-blue);
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.card {
    animation: fadeIn 0.3s ease-out !important;
}

/* Loading spinner */
.loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,.3);
    border-radius: 50%;
    border-top-color: var(--accent-blue);
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Responsivité */
@media (max-width: 768px) {
    .container-fluid {
        padding: 10px !important;
    }
    
    .card {
        margin-bottom: 15px !important;
    }
    
    .btn {
        width: 100% !important;
        margin-bottom: 10px !important;
    }
}

/* Container principal */
.container-fluid {
    background-color: var(--bg-primary) !important;
    min-height: 100vh !important;
    padding: 20px !important;
}

/* Amélioration des icônes FontAwesome */
.fas, .fa {
    margin-right: 8px !important;
}

/* Style pour les métriques de performance */
.metrics-table td {
    padding: 8px 12px !important;
    border-bottom: 1px solid var(--border-color) !important;
}

.metrics-table tr:hover {
    background-color: rgba(52, 152, 219, 0.1) !important;
}

/* Graphiques Plotly */
.js-plotly-plot {
    border-radius: 6px !important;
    overflow: hidden !important;
}

/* Headers de page */
h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary) !important;
}

.text-center h1 {
    text-shadow: 0 2px 4px rgba(0,0,0,0.3) !important;
}

/* Fix pour les composants Bootstrap dans un thème sombre */
.list-group-item {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
}

.list-group-item:hover {
    background-color: var(--bg-secondary) !important;
}

/* Style pour les détails/summary */
details {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 6px !important;
    padding: 10px !important;
    margin: 10px 0 !important;
}

summary {
    color: var(--accent-blue) !important;
    cursor: pointer !important;
    font-weight: bold !important;
}

summary:hover {
    color: #2980b9 !important;
}

/* Pre code styling */
pre {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 4px !important;
    padding: 15px !important;
    overflow-x: auto !important;
    font-size: 12px !important;
}

/* Amélioration des tooltips */
.tooltip-inner {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
}

/* Style spécial pour les cards de stratégies */
.strategy-card {
    transition: transform 0.2s ease, box-shadow 0.2s ease !important;
}

.strategy-card:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 8px 16px rgba(0,0,0,0.2) !important;
}